<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AR.js Test PNG</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

  <script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/AR-js-org/AR.js/aframe/build/aframe-ar.js"></script>

  <style>
    body {
      margin: 0;
      overflow: hidden;
    }
  </style>
</head>

<body>

<a-scene
  embedded
  arjs="sourceType: webcam; debugUIEnabled: false;"
  vr-mode-ui="enabled: false"
>

  <!-- MARKER -->
  <a-marker preset="hiro" id="marker">

    <!-- MODELO 3D (ANIMADO) -->
    <a-entity
      id="model"
      gltf-model="materiales/fakemogus.glb"
      position="0 0 0"
      scale="0.5 0.5 0.5"
      animation-mixer
    ></a-entity>

    <!-- PNG COMO PLANO (ESTÃTICO) -->
    <a-plane
      id="plus1"
      src="materiales/plus1.png"
      position="0 -0.3 0"
      rotation="-90 0 0"
      width="0.4"
      height="0.4"
      visible="false"
      material="shader: flat; transparent: true"
    ></a-plane>

  </a-marker>

  <a-camera></a-camera>

</a-scene>

<audio id="clickSound" src="materiales/click.mp3"></audio>

<script>
  const marker = document.getElementById("marker");
  const plus1 = document.getElementById("plus1");
  const sound = document.getElementById("clickSound");

  let markerVisible = false;

  marker.addEventListener("markerFound", () => {
    markerVisible = true;
  });

  marker.addEventListener("markerLost", () => {
    markerVisible = false;
    plus1.setAttribute("visible", false);
  });

  document.body.addEventListener("click", () => {
    if (!markerVisible) return;

    sound.currentTime = 0;
    sound.play();

    plus1.setAttribute("visible", true);
  });
</script>

</body>
</html>
